language:
  - python
  - cpp

matrix:
  fast_finish: false
  include:
    - os: linux
      dist: bionic
      compiler: clang

    - os: linux
      dist: bionic
      compiler: gcc

    - os: osx
      osx_image: xcode10.3
      language: cpp

    - os: osx
      osx_image: xcode11
      language: cpp

  allow_failures:
    - os: osx

before_install:
  - sudo apt-get update
  - sudo apt-get install apt-transport-https ca-certificates gnupg software-properties-common wget
  - wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | sudo apt-key add -
  - sudo apt-add-repository 'deb https://apt.kitware.com/ubuntu/ $(lsb_release -a) main'
  - sudo apt-get update
  - sudo apt-get install cmake

install:
# Install conan
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update       ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install conan; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install cmake; fi
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then pip install conan; fi
# Automatic detection of your arch, compiler, etc.
  - conan user
script:
   - cmake --version
   - cmake -Bbuild -H.
   - make -C build all test
